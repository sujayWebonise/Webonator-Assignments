mysql> select * from users;
+----+-------+-------------------------+----------+---------+
| id | name  | email                   | password | isadmin |
+----+-------+-------------------------+----------+---------+
|  1 | sujay | sujay.gavhane@gmail.com | sujay    |       0 |
|  2 | ketan | ketan.saxena@gmail.com  | ketan    |       0 |
|  3 | divya | divya.sharma@gmail.com  | divya    |       0 |
+----+-------+-------------------------+----------+---------+


mysql> select * from assessments;
+----+---------+-----------+-----------+----------+
| id | name    | min_marks | max_marks | duration |
+----+---------+-----------+-----------+----------+
|  1 | maths   |         4 |        10 |       20 |
|  2 | physics |         4 |        10 |       20 |
|  3 | C       |         4 |        10 |       20 |
|  4 | C++     |         4 |        10 |       20 |
+----+---------+-----------+-----------+----------+


mysql> select * from questions;
+----+------------------------------------------------------+----------+
| id | content                                              | is_image |
+----+------------------------------------------------------+----------+
|  1 | 1+2=?                                                |        0 |
|  2 | 4*2=?                                                |        0 |
|  3 | which one of the following is conditional statement? |        0 |
+----+------------------------------------------------------+----------+


mysql> select * from options;
+----+----------+----------+
| id | options  | is_image |
+----+----------+----------+
|  1 | 1        |        0 |
|  2 | 2        |        0 |
|  3 | 3        |        0 |
|  4 | 4        |        0 |
|  5 | 7        |        0 |
|  6 | 8        |        0 |
|  7 | 9        |        0 |
|  8 | 10       |        0 |
|  9 | if       |        0 |
| 10 | for      |        0 |
| 11 | while    |        0 |
| 12 | do while |        0 |
+----+----------+----------+

select * from given_assessments;
+----+---------+---------------+-------------+-------+
| id | user_id | assess_map_id | user_answer | score |
+----+---------+---------------+-------------+-------+
|  1 |       2 |             1 |           3 |     1 |
|  2 |       2 |             1 |           7 |     0 |
|  3 |       1 |             3 |           9 |     1 |
|  4 |       1 |             4 |           9 |     1 |
|  5 |       2 |             1 |           8 |     0 |
|  6 |       2 |             1 |           6 |     1 |
|  7 |       1 |             3 |           9 |     1 |
+----+---------+---------------+-------------+-------+

select * from assessment_mapping;
+----+-------------+-----------+---------------+-------------+
| id | question_id | option_id | asswssmwnt_id | answer_flag |
+----+-------------+-----------+---------------+-------------+
|  1 |           1 |         3 |             1 |           1 |
|  2 |           2 |         6 |             1 |           1 |
|  3 |           3 |         9 |             3 |           1 |
|  4 |           3 |        10 |             3 |           0 |
|  5 |           3 |        11 |             3 |           0 |
|  6 |           3 |        12 |             3 |           0 |
|  7 |           2 |         5 |             1 |           0 |
|  8 |           2 |         7 |             1 |           0 |
|  9 |           2 |         8 |             1 |           0 |
| 10 |           1 |         1 |             1 |           0 |
| 11 |           1 |         2 |             1 |           0 |
| 12 |           1 |         4 |             1 |           0 |
+----+-------------+-----------+---------------+-------------+


View


CREATE VIEW student_details1 AS
SELECT u.id,u.name,email,asm.id as assessment_id,sum(score) as score
FROM users as u,assessments as asm,given_assessments as g,assessment_mapping as a
WHERE (u.id=g.user_id AND g.assess_map_id=a.id AND asm.id=a.asswssmwnt_id)
group by u.id,asm.id;


+----+-------+-------------------------+---------------+-------+
| id | name  | email                   | assessment_id | score |
+----+-------+-------------------------+---------------+-------+
|  1 | sujay | sujay.gavhane@gmail.com |             3 |     3 |
|  2 | ketan | ketan.saxena@gmail.com  |             1 |     2 |
+----+-------+-------------------------+---------------+-------+



PROCEDURE

CREATE PROCEDURE PIVOT() 
BEGIN 

select u.id as user_id,a.id as assessment_id,MAX(case when q.id='1' then ga.user_answer end) '1+2',MAX(case when q.id='2' then ga.user_answer end) '4*2',MAX(case when q.id='which one of the following is conditional statement?' then ga.user_answer end) 'which one of the following is conditional statement?' from users u,questions q,assessment_mapping am,assessments a,given_assessments ga,options o where u.id=ga.id AND ga.assess_map_id=am.id And am.asswssmwnt_id=a.id AND am.option_id=o.id group by u.id; 

END


+---------+---------------+------+------+------------------------------------------------------+
| user_id | assessment_id | 1+2  | 4*2  | which one of the following is conditional statement? |
+---------+---------------+------+------+------------------------------------------------------+
|       1 |             1 |    3 |    3 |                                                 NULL |
|       2 |             1 |    7 |    7 |                                                 NULL |
|       3 |             3 |    9 |    9 |                                                 NULL |
+---------+---------------+------+------+------------------------------------------------------+







